/* 
 * Port CSS - 端口和标签样式
 */

.port {
  position: absolute;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: color-mix(in srgb, var(--module-stroke) 50%, black);
  cursor: crosshair;
  /* 让圆心对准坐标点 */
  transform: translate(calc(-50% - 2px), calc(-50% - 2px));
}

.port:hover {
  /* hover 时保持居中，同时放大 */
  transform: translate(-50%, -50%) scale(1.1);
}

.port.clock-port {
  opacity: 0;
}

.port-label {
  position: absolute;
  font-size: 14px;
  font-family: "Maple Mono Normal NF CN", "Consolas", "Courier New", monospace;
  color: #1d262b;
  pointer-events: none;
  white-space: nowrap;
}

/* 左侧端口：标签在端口右边，向右偏移 */
.port-label[data-side="left"] {
  transform: translate(6px, calc(-50% - 2px));
}

/* 右侧端口：标签在端口左边，向左偏移 */
.port-label[data-side="right"] {
  transform: translate(calc(-100% - 10px), calc(-50% - 2px));
}

/* 顶部端口：标签在端口下方 */
.port-label[data-side="top"] {
  transform: translate(calc(-50% - 2px), 3px);
}

/* 底部端口：标签在端口上方 */
.port-label[data-side="bottom"] {
  transform: translate(calc(-50% - 2px), calc(-100% - 6px));
}

/* MUX上下端口 */
.port-label[data-side="slopeTop"] {
  transform: translate(calc(-50% - 1px), 6px);
}

.port-label[data-side="slopeBottom"] {
  transform: translate(calc(-50% + 1px), calc(-100% - 6px));
}

/* extender 的端口标签：覆盖默认 */
.module.extender .port {
  transform: translate(-50%, -50%);
}

.module.mux .port {
  transform: translate(-50%, -50%);
}

.module.extender .port-label[data-side="left"] {
  transform: translate(7px, -50%);
}

.module.extender .port-label[data-side="right"] {
  transform: translate(calc(-100% - 8px), -50%);
}

.module.mux .port {
  transform: translate(-50%, -50%);
}

.module.mux .port-label[data-side="left"] {
  transform: translate(7px, -50%);
}

.module.mux .port-label[data-side="right"] {
  transform: translate(calc(-100% - 8px), -50%);
}

/* 
.module.mux .port-label[data-side="top"] {
  transform: translate(calc(-50% - 2px), 3px);
} */

.clock-marker {
  position: absolute;
  width: 24px;
  height: 12px;
  margin-top: -3px;
  /* 使用与 port 相同的颜色 */
  background-color: color-mix(in srgb, var(--module-stroke) 50%, black);
  /* SVG 作为遮罩 */
  -webkit-mask: url("data: image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 12'%3E%3Cpath d='M1 1 L23 1 L12 11 Z' fill='none' stroke='white' stroke-width='2' stroke-linejoin='round'/%3E%3C/svg%3E") no-repeat center;
  mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 12'%3E%3Cpath d='M1 1 L23 1 L12 11 Z' fill='none' stroke='white' stroke-width='2' stroke-linejoin='round'/%3E%3C/svg%3E") no-repeat center;
  -webkit-mask-size: contain;
  mask-size: contain;
  pointer-events: none;
  transform: translate(calc(-50% - 2px), 0);
  z-index: 1;
}

.clock-marker[data-side="bottom"] {
  margin-top: 0;
  -webkit-mask: url("data: image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 12'%3E%3Cpath d='M12 1 L23 11 L1 11 Z' fill='none' stroke='white' stroke-width='2' stroke-linejoin='round'/%3E%3C/svg%3E") no-repeat center;
  mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 12'%3E%3Cpath d='M12 1 L23 11 L1 11 Z' fill='none' stroke='white' stroke-width='2' stroke-linejoin='round'/%3E%3C/svg%3E") no-repeat center;
  -webkit-mask-size: contain;
  mask-size: contain;
  transform: translate(calc(-50% - 2px), calc(-100% - 1px));
}